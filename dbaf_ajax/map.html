<!DOCTYPE html>
<html lang="de">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="icon" type="image/x-icon" href="img/favicon.ico">
        <title>DBAF - Karte</title>
        
        <!-- jQuery library -->
        <script type="text/javascript" src="dx_22.2.4/js/jquery.min.js"></script>
        <!-- DevExtreme theme -->
        <link rel="dx-theme" data-theme="generic.dark" href="dx_22.2.4/css/dx.dark.css" data-active="true">
        <!-- DevExtreme library -->
        <script type="text/javascript" src="dx_22.2.4/js/dx.all.js"></script>
        <script type="text/javascript" src="dx_22.2.4/js/vectormap-utils/dx.vectormaputils.js"></script>
        <!-- Dictionary files for German language -->
        <script src="dx_22.2.4/js/localization/dx.messages.de.js"></script>
        <!-- DBAF -->
        <link rel="stylesheet" type="text/css" href="css/style.css">
        <script type="text/javascript" src="js/dbaf.js"></script>
        <script type="text/javascript" src="js/request.js"></script>
    </head>

    <body class="dx-viewport">
        <div class="dbaf-toolbar" id="toolbar"></div>

        <div class="dbaf-group-main">
            <h1>Karte</h1>
            <div id="vectorMap"></div>
            <div class="dbaf-map" id="map"></div>
        </div>
    </body>

    <script type="text/javascript">
        // TODO:
        // MapTypes anzeigen
        // Marker anzeigen
        // Resize-Methode verbessern (ohne Konstante -30)
        // + Anwenden auf das Grid bei den Stations-Daten

        const mapTypes = [{
            key: 'roadmap',
            name: 'Road Map',
        }, {
            key: 'satellite',
            name: 'Satellite (Photographic) Map',
        }, {
            key: 'hybrid',
            name: 'Hybrid Map',
        }];

        const map = $('#map').dxMap({
            center: 'Quedlinburg, Germany',
            height: 100,
            zoom: 10,
            width: '100%',
            provider: 'bing',
            type: mapTypes[0].key,
        }).dxMap('instance');

        setTimeout(() => {
            ResizeMap();
        }, 50);

        function ResizeMap() {
            let iBodyHeight = Math.floor($("body").outerHeight(true));
            let iDocHeight = Math.floor($(window).outerHeight(true)) - 30;
            let iMapHeight = Math.floor($("#map").height());
            let iTotalMapAvailableHeight = iDocHeight - (iBodyHeight - iMapHeight);
            $("#map").height(iTotalMapAvailableHeight);
        }

        addEventListener("resize", (event) => {
            ResizeMap();
        });
    </script>
    
    <script type="text/javascript" src="js/toolbar.js"></script>
</html>